---
title: 内联、匿名类及位段
date created: 星期三, 十月 22日 2025, 5:28:06 下午
date modified: 星期三, 十月 22日 2025, 8:14:52 晚上
---

# 1 内联

引入内联函数的目的是优化性能，其原理是将子程序调用转换为宏调用，在编译时将函数体代码插入到调用处。

在类体内<font color="#ff0000">定义</font>或使用 inline 保留字说明的函数成员会内联。

内联失败的情况：
- 有分支类型语句（分支、循环、开关、函数调用）；
- 在定义前调用的；
- 虚函数或纯虚函数（运行时多态）。

# 2 匿名类

定义类时，没有给出类名。具有以下特点：
- 不能再类体外定义成员函数；
- 无法定义构造函数和析构函数；

无对象的匿名联合，其成员与联合本身的作用域相同，可以直接访问，并且各个数据成员共享存储空间（地址相同）

# 3 位段

在结构体或者联合体中以 位为单位 定义成员变量所占的空间。
```C++
struct LIGHT {
int red:1 ;
int green:1 ;
int yellow:1 ;
} trafficlights;

trafficlights.red = 1;
trafficlights.green= 0;
```
