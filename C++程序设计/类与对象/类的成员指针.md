---
tags:
  - 课程/CPP程序设计
title: 类的成员指针
date created: 星期六, 十月 18日 2025, 11:59:04 晚上
date modified: 星期三, 十月 22日 2025, 11:48:57 晚上
---

# 1 实例成员指针

实例成员指针指向类的一个实例，存放成员<font color="#ff0000">在类中的偏移地址</font>。故不能移动，但可以再指向另一个成员，也不能进行类型转换。

数据成员指针的定义和使用：
```C++
int ClassName::*p; // p 的类型为 int ClassName::*
p = &ClassName::intMemberName;
```

取函数地址时，有无 `&` 一样；调用 [[函数指针]] 时，有无 `*` 一样。

<font color="#d83931">成员函数指针</font>的定义和使用：
```C++
class Student { 
	public:
		void SetNumber(int x) { 
			number=x; 
		} 
}; 
Student xu(123,"Xu",100); 
void (Student:: *pf) (int) ; //成员函数指针定义 
void (*pq)(int) ; // 函数指针 
pf=&Student::SetNumber; 
(xu.*pf)(200); 
xu.SetNumber(200); // 等同语句
```

使用实例成员指针访问成员时必须和对象关联，通过 `object.*memberpointer` 和 `objectpointer->*memberpointer` 访问对象成员。

**成员指针相比于普通指针的优势**：
- 抽象和泛化编程
- 类型安全
- 封装性的补充（不会暴露内存布局）
- 与虚函数的结合

## 2 静态成员指针

静态成员相当于具有访问权限的变量和函数，同普通变量和函数相比，除访问权限外没有区别。因此，静态成员指针和普通指针形式上也没有区别。

| 静态成员指针   | 实例成员指针   |
| -------- | -------- |
| 存放静态成员地址 | 存放普通成员偏移 |
| 可以移动     | 不能移动     |
| 可以转换类型   | 不能转换类型   |
