---
title: 多态与虚函数
date created: 星期一, 十月 20日 2025, 10:57:40 上午
date modified: 星期二, 十月 21日 2025, 1:35:53 下午
---

# 多态与虚函数

## 1 [[多态]] (Polymorphism)

**定义：**
多态（Polymorphism）这个词来源于希腊语，意为“多种形态”。在面向对象编程 (OOP) 中，多态指的是**允许一个接口有多种实现**，或者说**允许一个对象在不同的上下文中表现出不同的行为**。
简单来说，就是“同一个操作作用于不同的对象，可以有不同的解释和行为”。

**C++ 中的多态类型：**
**1. 编译时多态 (Compile-time Polymorphism) / 静态多态：**
- **实现方式：** 主要通过**函数重载 (Function Overloading)** 和**函数模板 (Function Templates)** 实现。
- **特点：** 编译器在编译阶段就能确定调用哪个函数版本。
- **示例：**
```C++
void print(int i) { std::cout << "Int: " << i << std::endl; }
void print(double d) { std::cout << "Double: " << d << std::endl; }
// print(5) 和 print(5.0) 在编译时就确定了调用哪个版本
```
  
**2. 运行时多态 (Runtime Polymorphism) / 动态多态：**
- **实现方式：** 主要通过**虚函数 (Virtual Functions)** 和**继承 (Inheritance)** 实现。
- **特点：** 编译器在编译阶段无法确定调用哪个函数版本，而是在**程序运行时**根据对象的实际类型来决定。
- **示例：** 这就是虚函数发挥作用的地方。

## 2 [[虚函数]] (Virtual Function)

**定义：**
虚函数是在 C++ 的**基类 (Base Class)** 中声明的，用 ⁠virtual 关键字修饰的成员函数。

**虚函数在多态中的作用：**
虚函数是 C++ 实现**运行时多态**的核心机制。它允许你通过**基类指针或引用**调用派生类中重写的函数版本。

**工作原理：**
当一个基类指针或引用指向一个派生类对象时，如果通过这个指针或引用调用一个虚函数，C++ 会在**运行时**检查指针或引用实际指向的对象的类型，并调用该实际类型中对应的虚函数版本。
